<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>智慧校园 | 登录中心</title>
    <style>
        .repsd{
            display: flex;
            justify-content: space-around;
        }
    </style>
    <!--    // 知识点 jquery 的引入-->
    <script type="text/javascript" src="js/jquery.js"></script>
    <script src="layui/layui.js"></script>
    <script>

    </script>
    <!--    // 知识点 引入样式-->
    <link rel="stylesheet" type="text/css" href="css/index.css">
    <link rel="stylesheet" type="text/css"  href="css/style.css">
    <script>
        $(document).ready(function () {
            //记住密码
            // if(window.localStorage.getItem("json")){
            //     var user= JSON.parse(window.localStorage.getItem("json"));
            //     $("#name").val(user.name);
            //     $("#password").val(user.password);
            // }
            // $("#repsd").click(function (){
            //     if ($("#repsd").prop("checked")){
            //         var json={name:$("#name").val(), password:$("#password").val()};
            //         window.localStorage.removeItem("json");
            //         window.localStorage.setItem("json",JSON.stringify(json));
            //     }
            // });
            // 登录
            $("#btnLogin").click(function(){

                if  ($('#name').val()=="") {
                    alert("用户名不能为空！");
                    return;
                }
                if  ($('#password').val()==""){
                    alert("密码不能为空！");
                    return;
                }
                $.ajax({
                    // 提交数据的类型 POST GET
                    type: "Post",
                    // 提交的网址
                    url: "UserServlet",
                    // 提交的数据
                    data: {
                        username: $('#name').val(),
                        password: $('#password').val(),
                        method:"userLogin1"
                    },
                    // 返回数据的格式
                    datatype: "json",
                    // 在请求之前调用的函数
                    // beforeSend: xmlBeforeSend,
                    // 成功返回之后调用的函数
                    success: function (data) {
                        console.log(data);
                        if (data==1){
                            alert("登录成功");
                            window.location.href="./index.html" + "?username="+$('#name').val() ;
                        }else {
                            alert("账号或密码错误")
                        }
                    }//,
                    // 调用出错执行的函数
                    //error: xmlError
                });
            });
            //注册
            $("#btnregister1").click(function(){
                if  ($('#regname').val()=="") {
                    alert("用户名不能为空！");
                    return;
                }
                if  ($('#regpassword').val()==""){
                    alert("密码不能为空！");
                    return;
                }
                $.ajax({
                    // 提交数据的类型 POST GET
                    type: "Post",
                    // 提交的网址
                    url: "UserServlet",
                    // 提交的数据
                    data: {
                        username: $('#regname').val(),
                        password: $('#regpassword').val(),
                        email:$('#email').val(),
                        method:"userRegister"
                    },
                    // 返回数据的格式
                    datatype: "json",
                    // 在请求之前调用的函数
                    // beforeSend: xmlBeforeSend,
                    // 成功返回之后调用的函数
                    success: function (data) {
                        alert(data);
                        if (data==1){
                            alert("注册成功！");
                        }else{
                            alert(data);
                            alert("已经存在相同的用户名");
                        }
                        // var result =eval(data);

                    }//,
                    // 调用出错执行的函数
                    //error: xmlError
                });
            });
        });
    </script>
</head>
<!--  <body>-->
<!--&lt;!&ndash;  <%&#45;&#45;知识点常用HTML元素的使用，常用样式的使用&#45;&#45;%>&ndash;&gt;-->
<!--  <div class="div"  style="width:600px; height:500px; margin:0 auto;text-align: center;background-color: skyblue">-->
<!--    <div style="width:400px;height:300px; text-align: center; padding: 30px;">-->
<!--&lt;!&ndash;       用户名密码&ndash;&gt;-->
<!--      <div style="width:400px;height:50px;">-->
<!--        账号：-->
<!--        <input type="text" style="margin:0 auto;width:200px; height:30px;" id="name" name="name"/>-->
<!--      </div>-->
<!--      <div style="width:400px;height:50px; ">-->
<!--        密码：-->
<!--        <input type="password" style="width:200px; height:30px;" id="password" name="password" />-->
<!--      </div>-->
<!--        <div>-->
<!--        <input type="checkbox" value="记住密码" id="repsd">记住密码-->
<!--        </div>-->
<!--      <div style="width:400px;height:50px; margin:0 auto;">-->
<!--        <input type="button" value="注册" style="width:80px; height:30px; margin:0 auto;" id="btnRegister" name="btnRegister" />-->
<!--        <input type="button" value="登录" style="width:80px; height:30px; margin:0 auto;" id="btnLogin" name="btnLogin" />-->
<!--      </div>-->
<!--    </div>-->
<!--  </div>-->

<!--  </body>-->

<body style="background-image: url('images/bcg.jpg')">
<div class="content">
    <div class="form sign-in">
        <h2>智慧校园管理后台</h2>
        <label>
            <span>账号</span>
            <input type="text" id="name"/>
        </label>
        <label>
            <span>密码</span>
            <input type="password" id="password"/>
        </label>
        <p class="forgot-pass"><a href="javascript:">忘记密码？</a></p>
<!--       <div class="repsd"> <input type="checkbox" id="repsd"><p>记住密码</p></div>-->
        <button type="button" class="submit" id="btnLogin">登 录</button>
    </div>
    <div class="sub-cont">
        <div class="img">
            <div class="img__text m--up">
                <h2>还未注册？</h2>
                <p>立即注册，成为本系统的用户</p>
            </div>
            <div class="img__text m--in">
                <h2>已有帐号？</h2>
                <p>有帐号就登录吧，好久不见了！</p>
            </div>
            <div class="img__btn">
                <span class="m--up" id="btnRegister">注 册</span>
                <span class="m--in">登 录</span>
            </div>
        </div>
        <div class="form sign-up">
            <h2>立即注册</h2>
            <label>
                <span>用户名</span>
                <input type="text" id="regname" />
            </label>
            <label>
                <span>邮箱</span>
                <input type="email" id="email"/>
            </label>
            <label>
                <span>密码</span>
                <input type="password" id="regpassword"/>
            </label>
            <button type="button" class="submit" id="btnregister1">注 册</button>
        </div>
    </div>
</div>

<script src="js/script.js"></script>

<div style="text-align:center;">
</div>
</body>
</html>
